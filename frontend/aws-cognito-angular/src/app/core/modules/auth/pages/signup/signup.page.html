<ion-content class="ion-padding">
  <div class="logo"><img src="../../assets/logo.png" /></div>

  <form [formGroup]="form" (ngSubmit)="onSubmitForm()">
    <div class="form">
      <ion-item class="note">
        <ion-label class="ion-text-wrap">
          Complete the following form to register. Your phone number will be
          used as your login.</ion-label
        >
      </ion-item>

      <app-notification-item
        [show]="(pageState$ | async).notification.show"
        [message]="(pageState$ | async).notification.message"
        [colour]="(pageState$ | async).notification.colour"
      ></app-notification-item>

      <ion-item lines="none">
        <ion-label position="stacked" for="phone">Phone Number</ion-label>
        <ion-input
          id="phone"
          type="text"
          formControlName="phone"
          #phone
        ></ion-input>
      </ion-item>

      <ion-item
        lines="none"
        *ngIf="!form.controls.phone.valid  && (form.controls.phone.dirty || submitAttempt)"
      >
        <ion-label color="danger">Please enter a valid phone number.</ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked" for="password">Password</ion-label>
        <ion-input
          id="password"
          type="password"
          formControlName="password"
        ></ion-input>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked" for="confirmPassword"
          >Confirm Password</ion-label
        >
        <ion-input
          id="confirmPassword"
          type="password"
          formControlName="confirmPassword"
        ></ion-input>
      </ion-item>

      <ion-item
        lines="none"
        *ngIf="!form.controls.confirmPassword.valid  && (form.controls.confirmPassword.dirty || submitAttempt)"
      >
        <ion-label color="danger">Passwords must match.</ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked" for="name">Full Name</ion-label>
        <ion-input id="name" type="text" formControlName="name"></ion-input>
      </ion-item>

      <ion-item
        lines="none"
        *ngIf="!form.controls.name.valid  && (form.controls.name.dirty || submitAttempt)"
      >
        <ion-label color="danger">Please enter a valid full name.</ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked" for="company">Company</ion-label>
        <ion-input
          id="company"
          type="text"
          formControlName="company"
        ></ion-input>
      </ion-item>

      <ion-item
        lines="none"
        *ngIf="!form.controls.company.valid  && (form.controls.company.dirty || submitAttempt)"
      >
        <ion-label color="danger">Please enter a valid comany name.</ion-label>
      </ion-item>

      <ion-item lines="none">
        <ion-label position="stacked" for="role">Role </ion-label>
        <ion-input id="role" type="text" formControlName="role"></ion-input>
      </ion-item>

      <ion-item
        lines="none"
        *ngIf="!form.controls.role.valid  && (form.controls.role.dirty || submitAttempt)"
      >
        <ion-label color="danger">Please enter a valid role.</ion-label>
      </ion-item>

      <ion-button
        class="submit-button"
        expand="block"
        type="submit"
        [disabled]="!form.valid"
      >
        <ion-spinner
          *ngIf="(pageState$ | async).loading; else label"
        ></ion-spinner>
        <ng-template #label>Register</ng-template>
      </ion-button>
      <ion-button [routerLink]="['../signin']" expand="block" color="light"
        >Return to Login</ion-button
      >
    </div>
  </form>
</ion-content>
